#! /bin/bash
#@ECHO OFF
#1er parametro direccion muestra
#2do direccion creacion .asm
#3ro nombre para resultados
if [ $# -ne 2 ]; then
    echo "Usage: $0"
    exit 1
fi

#if [ ! -f "$shell_script" ]; then
#    echo "File not found: $shell_script"
#    exit 1
#fi

objdump -d "$1" -M intel-mnemonic --show-raw-insn -z --adjust-vma=0 --no-show-raw-insn --insn-width=7 --disassemble-zeroes --disassembler-options=intel > "$2/texto.asm"
cat "$2/texto.asm" | sed '/Disassembly/d' | sed '/>:/d' | sed '/^$/d' | sed '/^$/d' | awk '{print $2}' #> "$3"
rm "$2/texto.asm"